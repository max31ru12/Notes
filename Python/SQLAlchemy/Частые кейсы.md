
## Поле `created_at`

```python
created_at: Mapped[datetime] = mapped_column(  
    DateTime(timezone=True),  
    server_default=func.now(),  
    default=func.now(),  
    nullable=False,  
)
```

## Ручное добавление Enum в миграцию ()

```python
class RequestStatus(enum.Enum):  
    OPEN = "OPEN"  
    CLOSED = "CLOSED"  
    IN_PROGRESS = "IN_PROGRESS"  
  
  
def upgrade() -> None:  
  
    request_status_enum = sa.Enum(  
        RequestStatus, name="RequestStatus"  
    )  
    request_status_enum.create(op.get_bind())  
  
    op.add_column(  
        "contact_requests",  
        sa.Column(  
            "status",  
            request_status_enum,  
            default=RequestStatus.OPEN.value,  
            nullable=False,  
        ),  
    )  
    # ### end Alembic commands ###  
  
  
def downgrade() -> None:  
    # ### commands auto generated by Alembic - please adjust! ###  
    op.drop_column("contact_requests", "status")  
    sa.Enum(name="RequestStatus").drop(op.get_bind())  
    # ### end Alembic commands ###
```

## Добавить данные в миграции

```python
def upgrade() -> None:  
    # ### commands auto generated by Alembic - please adjust! ###  
    subscription_types_table = op.create_table('subscription_types',  
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),  
    sa.Column('name', sa.String(), nullable=False),  
    sa.Column('price_usd', sa.Numeric(precision=10, scale=2), nullable=False),  
    sa.Column('duration', sa.Integer(), nullable=False),  
    sa.Column('description', sa.String(), nullable=True),  
    sa.PrimaryKeyConstraint('id', name=op.f('pk_subscription_types'))  
    )  
  
    op.bulk_insert(subscription_types_table, [  
        {"name": "Trainee Basic", "price_usd": 10.00, "duration": 30, "description": "Monthly basic trainee plan"},  
        {"name": "Trainee Standard", "price_usd": 25.00, "duration": 90, "description": "Quarterly trainee plan"},  
        {"name": "Trainee Premium", "price_usd": 90.00, "duration": 365, "description": "Annual trainee plan"},  
        {"name": "Adjunct Basic", "price_usd": 10.00, "duration": 30, "description": "Monthly basic adjunct plan"},  
        {"name": "Adjunct Standard", "price_usd": 25.00, "duration": 90, "description": "Quarterly adjunct plan"},  
        {"name": "Adjunct Premium", "price_usd": 90.00, "duration": 365, "description": "Annual adjunct plan"},  
    ])
```