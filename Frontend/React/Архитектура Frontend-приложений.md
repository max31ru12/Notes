
**Архитектура** - взаимодействие модулей внутри приложения

## Виды архитектур

- Классическая архитектура
- Модульная простая архитектура
- Atomic Design
- Feature Sliced Design (модульная на стероидах)
- Микрофронтенд + монорепа + модульная


### Классическая

По сути нет никакой архитектуры

**Минус**: Тяжело поддерживать

**Плюс**: Быстро склепать проект

#### Структура папок:
- `pages` - страницы
- `components` - свалка компонентов
- `api` - запросы к apiшке
- `helpers` - какие-то общие функции
- `store` - управление состоянием (например, Redux)
- `hooks` - (для реакта это кастомные хуки)
- `assets` - иконки

#### Когда использовать
1) Маленькая команда
2) Проектная работы (сделал и забыл)
3) MVP
4) Простые админки / интернет-магазины / корпоративные порталы

### Модульная архитектура

#### Структура папок
- `pages` - страницы, т.е самые верхнеуровневые модули (в идеале - просто перечисление компонентов из модулей)
- `modules` - модули со своей бизнес-логикой и задачей, имеет свои:
  1) store
  2) components
  3) helpers
  4) api
- `components` - универсальные компоненты, которые используются в разных модулях
- `UI` - переиспользуемые UI-компоненты без бизнес-логики:
  1) Тултипы
  2) Модали
  3) Кнопки
  4) Инпуты

#### Изоляция модулей

Изоляция внутри модуля с помощью public api - в файле **index.ts**, который будет выглядеть таким образом

```ts
export { RegistrationForm } from "./components/RegistrationForm"
export { registrationFormReducer } from "./store/reducer"
```

Единственный способ достать из модуля - импортировать из **index.ts** 

![[Pasted image 20241226210529.png]]

#### Плюсы
1) Изоляция внутренностей модулей
2) Однонаправленный поток данных
3) Модули легко удалять из кода

#### Минусы
1) Что делать, если модуль нужно использовать в другом модуле?
2) Что выносить в **modules**, а что в **components**? 
3) Где хранить бизнесовые сущности?
4) Неявные связи в глобальных функциях/данных (корневые store, helpers, consts)


### Atomic Design

#### Структура разбиения проекта
- `Atoms` - UI-компоненты
- `Molecules` - Компонент, состоящий их нескольких атомов
- `Organisms`
- `Templates` - абстрактные страницы
- `Pages`

### Feature Sliced Design

#### Структура папок

- `Слои` - всего 7 слоев. слой может использовать только нижележащие слои (однонаправленный поток данных):
  1) `app` - Инициализирующая логика-приложения
  2) `processes` - **(deprecated)** процессы приложения, протекающие на страницами
  3) `pages` - страницы приложения
  4) `widgets` - самостоятельные и полноценные компоненты (**header**, **navbar**, **footer**) или же блоки для страниц
  5) `features` - (Опционально) модули, которые несут бизнес ценность (форма регистрации, форма комментария)
  6) `entities` - (Опционально) бизнес сущности (user, article и т.д.), которыми оперирует предметная область
  7) `shared` - переиспользуемые модули, без привязки к бизнес-логике

- `Слайсы` \[модуль] - находятся в слоях, представляют из себя те же модули, что и в модульной архитектуре

- `Сегмент` - находятся внутри слайсов (модулей), представляют из себя:
  - api
  - компоненты
  - helpers
  - consts
  - lib
  - UI
  - model - бизнес логика, взаимодействие со **state'ом**

#### Аналогия с ООП

![[Pasted image 20241226214246.png]]


#### Когда в какой слой помещать
![[Pasted image 20241226214816.png]]

### Правила
#### Правило импорта для слайсов
Модуль (файл) в слайсе могут импортировать другие слайсы только если они расположены в слайсе ниже

#### Правило создания сегмента
Создание новых сегментов должно отвечать на вопрос **"зачем?"**, а не на вопрос **"что?"**.

#### Правило создания Public API
Public API создается:
- для каждого из слайсов внутри **layers**
- для сегментов внутри **shared**

```ts
// pages/feed/index.ts
export { FeedPage } from "./ui/FeedPage";
```

##### Плохие примеры:
- components
- hooks
- modals

### Сегменты внутри слайсов

- `api/` - для операций с бэкендом
- `ui` - код, который используется для рендеринга и внешнего вида
- `model/` - **redux store** и бизнес логика (взаимодействие со стором)
- `config/` - конфигурация



#### Shared
**Shared** состоит только из segments. В **shared** код выносится, в основном, в процессе разработки, а не планируется заранее. Возможные варианты для выноса в **shared**:
- `ui/` - buttons, modal dialogs, form inputs.
- `api/`
- `config/`
- `i18n/` - локализация для языков
- `router/` - константы для роутов, ссылки на **rest api**




